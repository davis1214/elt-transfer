(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["eltabletransfer"]=e():t["eltabletransfer"]=e()})("undefined"!==typeof self?self:this,function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s="fb15")}({"91ca":function(t,e,a){"use strict";var i=a("93f4"),n=a.n(i);n.a},"93f4":function(t,e,a){},ce41:function(t,e,a){},f27c:function(t,e,a){"use strict";var i=a("ce41"),n=a.n(i);n.a},f6fd:function(t,e){(function(t){var e="currentScript",a=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(i){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(i.stack)||[!1])[1];for(t in a)if(a[t].src==e||"interactive"==a[t].readyState)return a[t];return null}}})})(document)},fb15:function(t,e,a){"use strict";var i;(a.r(e),"undefined"!==typeof window)&&(a("f6fd"),(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(a.p=i[1]));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transfer"},[a("div",{staticClass:"transfer-panel"},[a("p",{staticClass:"transfer-panel-header"},[a("span",[t._v(t._s(t.titleTexts&&t.titleTexts[0]))]),a("span",[t._v(t._s(t.leftSelection.length)+"/"+t._s(t.leftTableData.length))])]),t.showQuery?a("div",[[a("el-form",{staticClass:"query-form",attrs:{inline:!0,model:t.leftQueryCondition}},[t._t("lcondition",null,{scope:t.leftQueryCondition}),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.onLeftQuerySubmit()}}},[t._v(t._s(t.queryTexts[0]))])],1)],2)]],2):t._e(),a("el-table",{ref:"leftTable",attrs:{size:"small","max-height":t.maxHeight,height:t.minHeight,data:t.leftTableData,"row-key":t.tableRowKey,"row-style":t.handleRowStyle,border:"",stripe:""},on:{"row-click":t.handleLeftRowClick,"selection-change":t.handleLeftSelectionChange}},[a("el-table-column",{attrs:{width:"40px",type:"selection",selectable:t.handleSelectable}}),t._l(t.leftColumns,function(e){return a("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,width:e.width},scopedSlots:t._u([{key:"default",fn:function(i){return[t._t("default",[a("span",[t._v(t._s(i.row[e.id]))])],{scope:{row:i.row,col:e}})]}}],null,!0)})})],2),t.showPagination?a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,"pager-count":5,total:t.totalSize,layout:"total, sizes, prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),a("div",{staticClass:"transfer-buttons"},[a("el-button",{class:t.buttonClasses,attrs:{type:"primary",disabled:t.disabledLeftButton},nativeOn:{click:function(e){return t.addToRight(e)}}},[void 0!==t.buttonTexts[0]?a("span",{staticClass:"button-text"},[t._v(t._s(t.buttonTexts[0]))]):t._e(),a("i",{staticClass:"el-icon-arrow-right"})]),a("el-button",{class:t.buttonClasses,attrs:{type:"primary",disabled:0===t.rightSelection.length},nativeOn:{click:function(e){return t.addToLeft(e)}}},[a("i",{staticClass:"el-icon-arrow-left"}),void 0!==t.buttonTexts[1]?a("span",{staticClass:"button-text"},[t._v(t._s(t.buttonTexts[1]))]):t._e()])],1),a("div",{staticClass:"transfer-panel"},[a("p",{staticClass:"transfer-panel-header"},[a("span",[t._v(t._s(t.titleTexts&&t.titleTexts[1]))]),a("span",[t._v(t._s(t.rightSelection.length)+"/"+t._s(t.rightTableData.length))])]),t.showQuery?a("div",[a("el-form",{staticClass:"query-form",attrs:{inline:!0,model:t.rightQueryCondition}},[t._t("rcondition",null,{scope:t.rightQueryCondition}),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.onRightQuerySubmit()}}},[t._v(t._s(t.queryTexts[1]))])],1)],2)],1):t._e(),a("el-table",{ref:"rightTable",attrs:{size:"small","max-height":t.maxHeight,height:t.minHeight,data:t.calcRightTableData,"row-key":t.tableRowKey,border:"",stripe:""},on:{"selection-change":t.handleRightSelectionChange}},[a("el-table-column",{attrs:{width:"40px",type:"selection"}}),t._l(t.rightColumns||t.leftColumns,function(e){return["col"===e.type?a("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,width:e.width}}):t._e(),"input"===e.type?a("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,width:e.width},scopedSlots:t._u([{key:"default",fn:function(i){return[a("el-input",{attrs:{size:"small"},model:{value:t.rightTableData[i.$index][e.id],callback:function(a){t.$set(t.rightTableData[i.$index],e.id,a)},expression:"rightTableData[scope.$index][col.id]"}})]}}],null,!0)}):t._e(),"order"===e.type?a("el-table-column",{key:e.id,attrs:{prop:e.id,label:e.label,width:e.width},scopedSlots:t._u([{key:"default",fn:function(i){return[a("el-input-number",{attrs:{size:"small",min:1,max:65535},model:{value:t.rightTableData[i.$index][e.id],callback:function(a){t.$set(t.rightTableData[i.$index],e.id,a)},expression:"rightTableData[scope.$index][col.id]"}})]}}],null,!0)}):t._e()]})],2),t.showPagination?a("el-pagination",{attrs:{total:t.rightTableData.length,layout:"total"}}):t._e()],1)])},l=[],r={name:"EltTransfer",props:{value:{type:Array,default(){return[]}},showQuery:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!1},paginationCallBack:{type:Function,default:function(){return new Promise((t,e)=>{try{t({total:0,data:null})}catch{e()}})}},rightDataCallBack:{type:Function,default:function(){return new Promise((t,e)=>{try{t({data:null})}catch{e()}})}},titleTexts:{type:Array,default(){return["待选项","已选项"]}},buttonTexts:{type:Array,default(){return[]}},queryTexts:{type:Array,default(){return["查询","筛选"]}},leftColumns:{type:Array,default(){return[]}},rightColumns:{type:Array,default(){}},minHeight:{type:String,default:"300px"},maxHeight:{type:String,default:"500px"},tableRowKey:{type:Function,default(t){return t&&t&&t.id}}},data(){return{leftTableData:[],rightTableData:this.value||[],pageIndex:1,pageSize:20,totalSize:0,leftSelection:[],rightSelection:[],leftQueryCondition:{},rightQueryCondition:{},rightConditionTemp:void 0}},created(){this.handlePaginationCallBack(),this.handleRightDataCallBack()},computed:{hasButtonTexts(){return 2===this.buttonTexts.length},buttonClasses(){return["transfer-button",{"is-with-texts":this.hasButtonTexts}]},disabledLeftButton(){return!this.leftSelection.some(t=>!this.rightTableData.some(e=>this.checkObjectIsEqual(t,e)))},calcRightTableData(){if(this.showQuery&&this.rightConditionTemp){const t=Object.keys(this.rightConditionTemp);return this.rightTableData.filter(e=>{return t.some(t=>{const a=e[t],i=this.rightConditionTemp[t].trim();return!a||String(a).indexOf(i)>-1})})}return this.rightTableData}},methods:{handleLeftSelectionChange(t){this.leftSelection=t},handleRightSelectionChange(t){this.rightSelection=t},handleLeftRowClick(t){this.rightTableData.some(e=>this.checkObjectIsEqual(e,t))||this.$refs.leftTable.toggleRowSelection(t)},handleRightRowClick(t){this.$refs.rightTable.toggleRowSelection(t)},handleSizeChange(t){this.pageSize=t,this.handlePaginationCallBack()},handleCurrentChange(t){this.pageIndex=t,this.handlePaginationCallBack()},handlePaginationCallBack(){if(this.showPagination&&this.paginationCallBack){const t={pageIndex:this.pageIndex,pageSize:this.pageSize,...this.leftQueryCondition};this.paginationCallBack.call(null,t).then(t=>{t&&Array.isArray(t.data)&&(this.leftTableData=t.data,this.totalSize=t.total),this.$nextTick(()=>{this.leftTableData.forEach(t=>{const e=this.rightTableData.some(e=>this.checkObjectIsEqual(e,t));this.$refs.leftTable.toggleRowSelection(t,e)})})})}},handleRightDataCallBack(){if(this.showPagination&&this.rightDataCallBack){const t={pageIndex:this.pageIndex,pageSize:this.pageSize,...this.rightQueryCondition};this.rightDataCallBack.call(null,t).then(t=>{t&&Array.isArray(t.data)&&(this.rightTableData=t.data)}),this.$nextTick(()=>{this.leftTableData.forEach(t=>{const e=this.rightTableData.some(e=>this.checkObjectIsEqual(e,t));this.$refs.leftTable.toggleRowSelection(t,e)})})}},handleRowStyle({row:t}){return this.rightTableData.some(e=>this.checkObjectIsEqual(e,t))?(this.leftTableData.filter(e=>this.checkObjectIsEqual(t,e)).forEach(t=>{this.$refs.leftTable.toggleRowSelection(t,!0)}),{color:"blue"}):{}},handleSelectable(t){return!this.rightTableData.some(e=>this.checkObjectIsEqual(e,t))},addToRight(){for(const t of this.leftSelection){const e=this.rightTableData.some(e=>this.checkObjectIsEqual(e,t));e||this.rightTableData.push(t)}this.$emit("input",this.rightTableData)},addToLeft(){this.rightSelection.forEach(t=>{const e=this.rightTableData.findIndex(e=>this.checkObjectIsEqual(e,t));if(-1!==e){this.rightTableData.splice(e,1);const a=this.leftTableData.find(e=>this.checkObjectIsEqual(e,t));a&&this.$refs.leftTable.toggleRowSelection(a,!1)}}),this.$emit("input",this.rightTableData)},onLeftQuerySubmit(){this.handlePaginationCallBack()},onRightQuerySubmit(){this.handleRightDataCallBack()},checkObjectIsEqual(t,e){return this.tableRowKey(t)===this.tableRowKey(e)},clear(){this.rightTableData=[],this.$refs.leftTable.clearSelection();for(const t in this.leftQueryCondition)this.leftQueryCondition[t]=void 0;for(const t in this.rightQueryCondition)this.rightQueryCondition[t]=void 0;this.pageIndex=1},etlTransferCreated(){this.rightTableData=[],this.leftTableData=[],this.rightSelection=[],this.leftSelection=[],this.pageIndex=1,this.leftQueryCondition={},this.rightQueryCondition={},this.handleRightDataCallBack(),this.handlePaginationCallBack()}}},o=r;a("91ca"),a("f27c");function s(t,e,a,i,n,l,r,o){var s,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),r?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=s):n&&(s=o?function(){n.call(this,this.$root.$options.shadowRoot)}:n),s)if(c.functional){c._injectStyles=s;var h=c.render;c.render=function(t,e){return s.call(e),h(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,s):[s]}return{exports:t,options:c}}var c=s(o,n,l,!1,null,"1669c93a",null),h=c.exports;h.install=function(t){t.component(h.name,h)};var u=h;const d=[u];function f(t){d.map(e=>{t.component(e.name,e)})}void 0!==typeof window&&window.Vue&&f(window.Vue);var g={eltTransfer:u,install:f};e["default"]=g}})});
//# sourceMappingURL=eltabletransfer.umd.min.js.map